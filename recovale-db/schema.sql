DROP TABLE IF EXISTS Employee CASCADE;
DROP TABLE IF EXISTS "user" CASCADE;
DROP TABLE IF EXISTS reward CASCADE;

CREATE TABLE employee (
    id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    "type" VARCHAR(9) NOT NULL CHECK ("type" IN ('ADMIN', 'COLLECTOR')),
    username VARCHAR(50) NOT NULL,
    "password" VARCHAR(128) NOT NULL,
    created_by BIGINT,
    is_deleted BOOLEAN DEFAULT false
);

CREATE TABLE "user" (
    id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    "type" VARCHAR(9) NOT NULL CHECK ("type" IN ('SENDER', 'RECIPIENT')),
    username VARCHAR(50) NOT NULL,
    "password" VARCHAR(128) NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE,
    cpf VARCHAR(14) NOT NULL UNIQUE,
    current_points INT NOT NULL DEFAULT 0,
    total_points INT NOT NULL DEFAULT 0,
    is_deleted BOOLEAN DEFAULT false
);

CREATE TABLE reward (
    id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    title VARCHAR(50) NOT NULL,
    description VARCHAR(255) NOT NULL,
    points INTEGER NOT NULL,
    quantity_available INTEGER NOT NULL,
    is_deleted BOOLEAN NOT NULL DEFAULT false
);
